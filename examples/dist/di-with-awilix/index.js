!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=React,n=e.n(t),r=ReactDOM,a=e.n(r),i=ReactAwilix,o=ReactMVVM;function s(){var e=(0,i.useCradle)().breed;(0,t.useEffect)((function(){return function(){e.dispose()}}),[]);var r=e.name,a=e.origin,s=e.weight,l=e.visible,u=e.toggle;return n().createElement("div",null,n().createElement(o.Bind,{$type:"button",onClick:u},l.to((function(e){return e?"hide":"show"}))),n().createElement("table",null,n().createElement("tbody",null,n().createElement("tr",null,n().createElement("td",null,"Name"),n().createElement("td",null,r)),n().createElement(o.Bind,{$type:"tr",hidden:l.to((function(e){return!e}))},n().createElement("td",null,"Origin"),n().createElement("td",null,a)),n().createElement(o.Bind,{$type:"tr",hidden:l.to((function(e){return!e}))},n().createElement("td",null,"Weight"),n().createElement("td",null,s," kg")))))}var l,u=Awilix,c=new Uint8Array(16);function d(){if(!l&&!(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(c)}for(var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,h=function(e){return"string"==typeof e&&f.test(e)},p=[],m=0;m<256;++m)p.push((m+256).toString(16).substr(1));var b=function(e,t,n){var r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(p[e[t+0]]+p[e[t+1]]+p[e[t+2]]+p[e[t+3]]+"-"+p[e[t+4]]+p[e[t+5]]+"-"+p[e[t+6]]+p[e[t+7]]+"-"+p[e[t+8]]+p[e[t+9]]+"-"+p[e[t+10]]+p[e[t+11]]+p[e[t+12]]+p[e[t+13]]+p[e[t+14]]+p[e[t+15]]).toLowerCase();if(!h(n))throw TypeError("Stringified UUID is invalid");return n}(r)};function y(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function g(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var v=axios,E=e.n(v),w=function(){function e(){}return e.prototype.getBreeds=function(e){return y(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,E().get("./api/breeds/"+encodeURIComponent(e)+".json")];case 1:return[2,t.sent().data]}}))}))},e.prototype.getAnimals=function(){return y(this,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return[4,E().get("./api/animals.json")];case 1:return[2,e.sent().data]}}))}))},e}(),C=function(){function e(e){var t=this;this.animals=(0,o.observable)([]),this.controlState=(0,o.observable)("unloaded"),this.selectItems=(0,o.computed)((function(e,t){return e.length?e.map((function(e){var t=e.key,r=e.name;return n().createElement("option",{key:t},r)})):"loading"===t?null:n().createElement("option",null,"Select an animal")}),[this.animals,this.controlState]),this.breeds=(0,o.observable)([]),this.selectedAnimalName=(0,o.observable)(""),this.state=(0,o.proxy)(this,"state"),this.loadAnimals=function(){return y(t,void 0,void 0,(function(){var e,t=this;return g(this,(function(n){switch(n.label){case 0:if("unloaded"!==this.state.controlState)return[3,4];this.state.controlState="loading",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.api.getAnimals()];case 2:if(e=n.sent(),this.state.animals=e.map((function(e){return t.createAnimal(e)})),!e.length)throw new Error;return this.state.controlState="loaded",this.state.selectedAnimalName=e[0],[3,4];case 3:return n.sent(),this.state.controlState="unloaded",[3,4];case 4:return[2]}}))}))},this.loadBreeds=function(){return y(t,void 0,void 0,(function(){var e,t=this;return g(this,(function(n){switch(n.label){case 0:if(!this.state.selectedAnimalName)return[3,5];n.label=1;case 1:return n.trys.push([1,3,4,5]),this.state.controlState="loading",[4,this.api.getBreeds(this.state.selectedAnimalName)];case 2:return e=n.sent(),this.state.breeds=e.map((function(e){return t.createBreed(e)})),[3,5];case 3:return n.sent(),[3,5];case 4:return this.state.controlState="loaded",[7];case 5:return[2]}}))}))},this.container=e.container,this.api=e.api}return e.prototype.createAnimal=function(e){var t=this.container.createScope();return t.register("container",(0,u.asValue)(t)),t.register("animalName",(0,u.asValue)(e)),t.cradle.animal},e.prototype.createBreed=function(e){var t=this.container.createScope();return t.register("container",(0,u.asValue)(t)),t.register("breedData",(0,u.asValue)(e)),t.cradle.breed},e}(),k=function(e){this.key=e.key,this.name=e.animalName},S=function(){function e(e){var t=this;this.visible=(0,o.observable)(!1),this.state=(0,o.proxy)(this,"state"),this.toggle=function(){t.state.visible=!t.state.visible},this.container=e.container,this.key=e.key,this.name=e.breedData.name,this.origin=e.breedData.origin,this.weight=e.breedData.weight}return e.prototype.dispose=function(){this.container.dispose()},e}();(0,i.configureContext)((function(){var e=(0,u.createContainer)();return e.register("container",(0,u.asValue)(e)),e.register("root",(0,u.asClass)(C).singleton()),e.register("animal",(0,u.asClass)(k).scoped()),e.register("breed",(0,u.asClass)(S).scoped()),e.register("key",(0,u.asFunction)((function(){return b()}))),e.register("api",(0,u.asClass)(w).singleton()),e})),a().render(n().createElement((function(){var e=(0,i.useCradle)().root,t=e.breeds,r=e.selectedAnimalName,a=e.selectItems,l=e.controlState,u=e.loadAnimals,c=e.loadBreeds;return n().createElement("div",null,n().createElement("div",null,n().createElement(o.Bind,{$type:"select",onClick:u,disabled:l.to((function(e){return"loading"===e})),value:r,onChange:r.bindValue((function(e){return e.target.value}))},a),n().createElement(o.Bind,{$type:"button",disabled:l.to((function(e){return"loaded"!==e})),onClick:c},"load")),n().createElement(o.Bind,{$type:"div"},t.to((function(e){return e.map((function(e){var t=e.container,r=e.key;return n().createElement(i.ContainerProvider,{key:r,container:t},n().createElement(s,null))}))}))))}),null),document.getElementById("root"))}();
//# sourceMappingURL=index.js.map