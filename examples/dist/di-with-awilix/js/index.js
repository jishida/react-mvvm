!function(){"use strict";var e={n:function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},d:function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}},t=React,n=e.n(t),r=ReactDOM,a=e.n(r),i=ReactAwilix,o=ReactMVVM;function s(){var e=(0,i.useCradle)().breed;(0,t.useEffect)((function(){return function(){e.dispose()}}),[]);var r=e.name,a=e.origin,s=e.weight,l=e.visible,c=e.toggle;return n().createElement("div",{className:"breed-view"},n().createElement("div",{className:"breed-header"},n().createElement("div",{className:"breed-header-name"},r),n().createElement(o.Bind,{$type:"button",onClick:c},l.to((function(e){return e?"Hide":"Show"})))),n().createElement(o.Bind,{$type:"table",className:"breed-table",hidden:l.to((function(e){return!e}))},n().createElement("tbody",null,n().createElement("tr",null,n().createElement("th",null,"Origin"),n().createElement("td",null,a)),n().createElement("tr",null,n().createElement("th",null,"Weight"),n().createElement("td",null,s," kg")))))}var l,c=Awilix,u=new Uint8Array(16);function d(){if(!l&&!(l="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return l(u)}for(var f=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,m=function(e){return"string"==typeof e&&f.test(e)},h=[],p=0;p<256;++p)h.push((p+256).toString(16).substr(1));var b=function(e,t,n){var r=(e=e||{}).random||(e.rng||d)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var a=0;a<16;++a)t[n+a]=r[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(h[e[t+0]]+h[e[t+1]]+h[e[t+2]]+h[e[t+3]]+"-"+h[e[t+4]]+h[e[t+5]]+"-"+h[e[t+6]]+h[e[t+7]]+"-"+h[e[t+8]]+h[e[t+9]]+"-"+h[e[t+10]]+h[e[t+11]]+h[e[t+12]]+h[e[t+13]]+h[e[t+14]]+h[e[t+15]]).toLowerCase();if(!m(n))throw TypeError("Stringified UUID is invalid");return n}(r)};function v(e,t,n,r){return new(n||(n=Promise))((function(a,i){function o(e){try{l(r.next(e))}catch(e){i(e)}}function s(e){try{l(r.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))}function y(e,t){var n,r,a,i,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(a=2&i[0]?r.return:i[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,i[1])).done)return a;switch(r=0,a&&(i=[2&i[0],a.value]),i[0]){case 0:case 1:a=i;break;case 4:return o.label++,{value:i[1],done:!1};case 5:o.label++,r=i[1],i=[0];continue;case 7:i=o.ops.pop(),o.trys.pop();continue;default:if(!((a=(a=o.trys).length>0&&a[a.length-1])||6!==i[0]&&2!==i[0])){o=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){o.label=i[1];break}if(6===i[0]&&o.label<a[1]){o.label=a[1],a=i;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(i);break}a[2]&&o.ops.pop(),o.trys.pop();continue}i=t.call(e,o)}catch(e){i=[6,e],r=0}finally{n=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var g=axios,E=e.n(g),w=function(){function e(){}return e.prototype.getBreeds=function(e){return v(this,void 0,void 0,(function(){return y(this,(function(t){switch(t.label){case 0:return[4,E().get("./api/breeds/"+encodeURIComponent(e)+".json")];case 1:return[2,t.sent().data]}}))}))},e.prototype.getAnimals=function(){return v(this,void 0,void 0,(function(){return y(this,(function(e){switch(e.label){case 0:return[4,E().get("./api/animals.json")];case 1:return[2,e.sent().data]}}))}))},e}(),C=function(){function e(e){var t=this;this.animals=(0,o.observable)([]),this.controlState=(0,o.observable)("loading"),this.breeds=(0,o.observable)([]),this.selectedAnimalName=(0,o.observable)(""),this.state=(0,o.proxy)(this,"state"),this.loadAnimals=function(){return v(t,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:this.state.controlState="loading",n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.api.getAnimals()];case 2:if(!(e=n.sent()).length)throw new Error;return this.state.animals=e.map((function(e){return t.createAnimal(e)})),this.state.selectedAnimalName=e[0],this.state.controlState="loaded",[3,4];case 3:return n.sent(),this.state.controlState="unloaded",[3,4];case 4:return[2]}}))}))},this.loadBreeds=function(){return v(t,void 0,void 0,(function(){var e,t=this;return y(this,(function(n){switch(n.label){case 0:if(!this.state.selectedAnimalName)return[3,5];n.label=1;case 1:return n.trys.push([1,3,4,5]),this.state.controlState="loading",[4,this.api.getBreeds(this.state.selectedAnimalName)];case 2:return e=n.sent(),this.state.breeds=e.map((function(e){return t.createBreed(e)})),[3,5];case 3:return n.sent(),[3,5];case 4:return this.state.controlState="loaded",[7];case 5:return[2]}}))}))},this.container=e.container,this.api=e.api,this.selectedAnimalName.onNotify.add((function(){t.loadBreeds()}))}return e.prototype.createAnimal=function(e){var t=this.container.createScope();return t.register("container",(0,c.asValue)(t)),t.register("animalName",(0,c.asValue)(e)),t.cradle.animal},e.prototype.createBreed=function(e){var t=this.container.createScope();return t.register("container",(0,c.asValue)(t)),t.register("breedData",(0,c.asValue)(e)),t.cradle.breed},e}(),N=function(e){this.key=e.key,this.name=e.animalName},k=function(){function e(e){var t=this;this.visible=(0,o.observable)(!1),this.state=(0,o.proxy)(this,"state"),this.toggle=function(){t.state.visible=!t.state.visible},this.container=e.container,this.key=e.key,this.name=e.breedData.name,this.origin=e.breedData.origin,this.weight=e.breedData.weight}return e.prototype.dispose=function(){this.container.dispose()},e}();(0,i.configureContext)((function(){var e=(0,c.createContainer)();return e.register("container",(0,c.asValue)(e)),e.register("root",(0,c.asClass)(C).singleton()),e.register("animal",(0,c.asClass)(N).scoped()),e.register("breed",(0,c.asClass)(k).scoped()),e.register("key",(0,c.asFunction)((function(){return b()}))),e.register("api",(0,c.asClass)(w).singleton()),e})),a().render(n().createElement((function(){var e=(0,i.useCradle)().root,r=e.animals,a=e.breeds,l=e.selectedAnimalName,c=e.controlState,u=e.loadAnimals;return(0,t.useMemo)(u,[]),n().createElement("div",{className:"app-root"},n().createElement("div",{className:"animal-selector"},n().createElement("div",{className:"animal-selector-select"},n().createElement("label",null,n().createElement("div",{className:"animal-selector-label"},"Select an animal"),n().createElement(o.Bind,{$type:"select",disabled:c.to((function(e){return"loading"===e})),value:l,onChange:l.bindValue((function(e){return e.target.value}))},r.to((function(e){return e.length?e.map((function(e){var t=e.key,r=e.name;return n().createElement("option",{key:t},r)})):null}))))),n().createElement(o.Bind,{$type:"div",className:"animal-selector-button",hidden:c.to((function(e){return"unloaded"!==e}))},n().createElement("button",{type:"button",onClick:u},"Reload"))),n().createElement(o.Bind,{$type:"div"},a.to((function(e){return e.map((function(e){var t=e.container,r=e.key;return n().createElement(i.ContainerProvider,{key:r,container:t},n().createElement(s,null))}))}))))}),null),document.getElementById("root"))}();
//# sourceMappingURL=index.js.map